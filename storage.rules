rules_version = '2';

service firebase.storage {
  match /b/{bucket}/o {
    // By default, allow public read access but deny writes.
    // This is useful for public assets but should be tightened for user-specific data.
    match /{allPaths=**} {
      allow read;
      allow write: if false; // Deny writes by default
    }

    // Specific rule for doctor documents.
    // This allows any authenticated user to write to the designated path.
    // In a production app, you would add more specific checks,
    // e.g., `if request.auth.uid == hospitalId;`
    match /doctors/{hospitalId}/{doctorId}/{fileName} {
      allow write: if request.auth != null;
    }
  }
}
